webpackJsonp([11],{"7BTO":function(e,r,t){var s=t("Hsb+");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t("rjj0")("60fb0db1",s,!0)},"7xr6":function(e,r,t){"use strict";var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("el-row",[t("el-col",{attrs:{span:12,offset:1}},[t("h2",[e._v("个人资料")]),e._v(" "),t("el-form",{ref:"profile",attrs:{model:e.user,rules:e.rules}},[t("el-form-item",{attrs:{label:"用户名："}},[t("span",[e._v(e._s(e.user.username))])]),e._v(" "),t("el-form-item",{attrs:{label:"邮箱地址："}},[t("span",[e._v(e._s(e.user.email))])]),e._v(" "),t("el-form-item",{attrs:{label:"电话",prop:"phone"}},[t("el-input",{attrs:{placeholder:"电话",clearable:""},model:{value:e.user.phone,callback:function(r){e.$set(e.user,"phone",r)},expression:"user.phone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"密码",clearable:""},model:{value:e.user.password,callback:function(r){e.$set(e.user,"password",r)},expression:"user.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"确认密码",prop:"passwordConfirm"}},[t("el-input",{attrs:{type:"",placeholder:"确认密码",clearable:""},model:{value:e.user.passwordConfirm,callback:function(r){e.$set(e.user,"passwordConfirm",r)},expression:"user.passwordConfirm"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.updateProfile}},[e._v("更新资料")]),e._v(" "),t("el-button",{on:{click:function(r){e.$router.go(-1)}}},[e._v("返回")])],1)],1)],1),e._v(" "),t("el-col",{attrs:{span:9,offset:2}},[t("div",{staticClass:"avatar-upload"},[t("el-upload",{attrs:{drag:"",action:"",multiple:""}},[t("i",{staticClass:"el-icon-upload"}),e._v(" "),t("div",{staticClass:"el-upload__text"},[e._v("将图片拖到此处，或"),t("em",[e._v("点击上传")])]),e._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("用户头像上传，只能上传jpg/png文件，且不超过500kb")])])],1)])],1)],1)},a=[],n={render:s,staticRenderFns:a};r.a=n},FbGH:function(e,r,t){"use strict";var s=t("Xxa5"),a=t.n(s),n=t("exGp"),o=t.n(n),i=t("vMJZ"),u=t("Pfph"),l=t("kWq3");r.a={data:function(){var e=this,r=function(r,t,s){t?t.length<6||t.length>16?s(new Error("密码长度在6-16位之间")):/^[\da-zA-Z]{6,16}$/.test(t)?(""!==e.user.passwordConfirm&&e.$refs.profile.validateField("passwordConfirm"),s()):s(new Error("密码只能为字母或数字")):s()},t=function(r,t,s){e.user.password?t?t!==e.user.password?s(new Error("两次密码输入不一致")):s():s(new Error("请再次输入密码")):s()};return{user:{},rules:{phone:[{validator:l.a.phone,trigger:"blur"}],password:[{validator:r,trigger:"blur"}],passwordConfirm:[{validator:t,trigger:"blur"}]}}},methods:{getProfile:function(){var e=this;return o()(a.a.mark(function r(){var t,s;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.a.getUserProfile();case 2:t=r.sent,s=t.data,e.user=s;case 5:case"end":return r.stop()}},r,e)}))()},logout:function(){var e=this;return o()(a.a.mark(function r(){return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e.$confirm("确认要退出吗？","提示",o()(a.a.mark(function r(){return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.a.logout();case 2:e.$router.replace({name:"Login",params:{msg:"退出成功"}});case 3:case"end":return r.stop()}},r,e)})));case 1:case"end":return r.stop()}},r,e)}))()},updateProfile:function(){var e=this;this.$refs.profile.validate(function(){var r=o()(a.a.mark(function r(t){return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=17;break}if(r.prev=1,!e.user.phone&&!e.user.password){r.next=11;break}if(!e.user.phone){r.next=7;break}return console.log(111),r.next=7,i.a.updatePhone(e.user.phone);case 7:if(!e.user.password){r.next=10;break}return r.next=10,i.a.changePassword({password:e.user.password,passwordConfirm:e.user.passwordConfirm});case 10:e.$message.success("修改成功");case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(1);case 15:r.next=18;break;case 17:return r.abrupt("return",!1);case 18:case"end":return r.stop()}},r,e,[[1,13]])}));return function(e){return r.apply(this,arguments)}}())}},mounted:function(){"Profile"===this.$route.name&&this.getProfile()}}},"Hsb+":function(e,r,t){r=e.exports=t("FZ+f")(!0),r.push([e.i,".avatar-upload{margin-top:200px}","",{version:3,sources:["D:/working/manage-sales/src/pages/Profile.vue"],names:[],mappings:"AACA,eACE,gBAAkB,CACnB",file:"Profile.vue",sourcesContent:["\n.avatar-upload {\n  margin-top: 200px;\n}\n"],sourceRoot:""}])},kWq3:function(e,r,t){"use strict";var s=t("Zrlr"),a=t.n(s),n=t("wxAW"),o=t.n(n),i=function(){function e(){a()(this,e)}return o()(e,null,[{key:"money",value:function(e,r,t){!1===/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/.test(r)?t(new Error("请输入正确的金额")):t()}},{key:"phone",value:function(e,r,t){if(""!==r){!1===/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/.test(r)?t(new Error("请输入正确的手机号")):t()}else t()}},{key:"email",value:function(e,r,t){if(r){!1===/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(r)?t(new Error("请输入正确的邮箱地址")):t()}else t()}}]),e}();r.a=i},qKQV:function(e,r,t){"use strict";function s(e){t("7BTO")}Object.defineProperty(r,"__esModule",{value:!0});var a=t("FbGH"),n=t("7xr6"),o=t("VU/8"),i=s,u=o(a.a,n.a,!1,i,null,null);r.default=u.exports}});
//# sourceMappingURL=11.1107e0c71c3403d489af.js.map