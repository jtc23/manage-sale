webpackJsonp([4],{"5/xu":function(e,t,a){"use strict";var s=a("ZQlS"),n=a("Q+i8"),r=a("VU/8"),i=r(s.a,n.a,!1,null,null,null);t.a=i.exports},"5Oio":function(e,t,a){"use strict";var s=a("CN+C"),n=a("o0wV"),r=a("VU/8"),i=r(s.a,n.a,!1,null,null,null);t.a=i.exports},"5yIK":function(e,t,a){"use strict";var s=a("Xxa5"),n=a.n(s),r=a("exGp"),i=a.n(r),o=a("Dd8w"),l=a.n(o),c=a("NYxO"),u=a("5/xu"),p=a("5Oio");a("sUAH");t.a={data:function(){return{title:"",activeName:"all",mutipleDel:!1,selections:[],refreshLoading:!1,page:1,size:15,tabs:[{title:"全部消息",name:"all",loading:!1},{title:"推荐消息",name:"recommend",loading:!1},{title:"奖金消息",name:"reward",loading:!1},{title:"红包消息",name:"cash",loading:!1},{title:"其它",name:"other",loading:!1}]}},components:{ListTable:p.a,Refresh:u.a},computed:l()({},Object(c.c)({messages:"messages",total:"total",per_page:"per_page",deleteStatus:"deleteStatus"})),methods:l()({},Object(c.b)(["getMessages","deleteMessages"]),{handleClick:function(e){var t=this;return i()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.page=1,t.$router.push({query:{page:1}}),e.index=parseInt(e.index,10),t.tab={name:e.name,index:e.index},t.type=e.name,t.setData(e.index,e.name);case 6:case"end":return a.stop()}},a,t)}))()},setData:function(e,t){var a=this;return i()(n.a.mark(function s(){return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a.$Progress.start(),a.tabs[e].loading=!0,s.next=4,a.getMessages({type:t,page:a.page});case 4:a.selections=[],a.mutipleDel=!1,a.size=a.per_page,a.tabs[e].message=a.messages,a.tabs[e].total=a.total,a.tabs[e].loading=!1,a.$Progress.finish();case 11:case"end":return s.stop()}},s,a)}))()},handleSelect:function(e){e.length>1?(this.mutipleDel=!0,this.selections=e.map(function(e){return e.id})):this.mutipleDel=!1},handleMultipeDel:function(){var e=this;return i()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.selections.length,t.prev=1,t.next=4,e.$confirm("确定要删除选中的"+a+"条数据吗？","提示");case 4:return e.tabs[e.tab.index].loading=!0,t.next=7,e.deleteMessages({ids:e.selections,type:e.type,page:e.page});case 7:"failed"!==e.deleteStatus?(e.$message({type:"success",message:"删除成功！"}),e.tabs[e.tab.index].message=e.messages):e.$message({type:"error",message:"删除失败！"}),e.selections=[],e.mutipleDel=!1,e.tabs[e.tab.index].loading=!1,e.handleClick({name:e.tab.name,index:e.tab.index}),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(1);case 16:case"end":return t.stop()}},t,e,[[1,14]])}))()},handleDelSuccess:function(){this.handleClick(this.tab)},changePage:function(e){this.page=e,this.$router.push({query:{page:e}}),this.setData(this.index,this.tab.name)},refreshAll:function(){var e=this;this.tabs.forEach(function(t,a){e.handleClick({name:t.name,index:a})})},refresh:function(){this.refreshAll()}}),mounted:function(){var e=this;return i()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("MessageList"!==e.$route.name){t.next=7;break}return e.type="all",t.next=4,e.refreshAll();case 4:e.tab=e.tabs[0],e.tab.index=0,e.index=0;case 7:case"end":return t.stop()}},t,e)}))()}}},AB4m:function(e,t,a){"use strict";function s(e){a("T0IU")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("5yIK"),r=a("lbnC"),i=a("VU/8"),o=s,l=i(n.a,r.a,!1,o,null,null);t.default=l.exports},"CN+C":function(e,t,a){"use strict";var s=a("Xxa5"),n=a.n(s),r=a("exGp"),i=a.n(r),o=a("sUAH"),l=a("vMJZ"),c=a("a3K0");t.a={props:["messages","type","total","loading"],data:function(){return{userDetail:{},userDialogVisible:!1,userDetailLoading:!1}},components:{UserDetail:c.a},methods:{goRecommendDetail:function(e){this.$router.push({name:"CustomerDetail",params:{id:e,cache:!1}})},showDetail:function(e){var t=this;return i()(n.a.mark(function a(){var s,r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.userDialogVisible=!0,a.next=3,l.a.getUserDetail(e);case 3:s=a.sent,r=s.data,t.userDetail=r;case 6:case"end":return a.stop()}},a,t)}))()},getPostDetail:function(e){this.$router.push({name:"ArticleDetail",params:{id:e,cache:!1}})},deleteNotify:function(e){var t=this;return i()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm("确认要删除这条消息吗？");case 3:o.a.deleteNotifies(e),t.$message({type:"success",message:"删除成功！"}),t.$emit("delSuccess"),a.next=10;break;case 8:a.prev=8,a.t0=a.catch(0);case 10:case"end":return a.stop()}},a,t,[[0,8]])}))()},handleSelect:function(e){this.$emit("select",e)},changePage:function(e){this.$emit("changePage",e)}},mounted:function(){}}},"Q+i8":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-button",{attrs:{size:e.size,icon:"el-icon-refresh",type:e.type,plain:"",loading:e.loading,timeout:e.timeout,disabled:e.refreshDisable},on:{click:e.refresh}},[e._v(e._s(e.refreshText)+"\n")])},n=[],r={render:s,staticRenderFns:n};t.a=r},T0IU:function(e,t,a){var s=a("hteX");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("58d5c85c",s,!0)},ZQlS:function(e,t,a){"use strict";t.a={props:{type:{type:String,default:"primary"},size:{type:String,default:"mini"},loading:{type:Boolean,default:!1},timeout:{type:Number,default:5e3}},data:function(){return{refreshText:"刷新",refreshDisable:!1}},methods:{refresh:function(){var e=this;this.$emit("refresh"),this.refreshText=5,this.refreshDisable=!0;var t=window.setInterval(function(){e.refreshText-=1},1e3);window.setTimeout(function(){clearInterval(t),e.refreshText="刷新",e.refreshDisable=!1},this.timeout)}}}},a3K0:function(e,t,a){"use strict";var s=a("q83M"),n=a("l/+F"),r=a("VU/8"),i=r(s.a,n.a,!1,null,null,null);t.a=i.exports},hteX:function(e,t,a){t=e.exports=a("FZ+f")(!0),t.push([e.i,".messages .el-tabs__item{height:50px;padding:0 30px}.messages .item{margin-top:10px}.messages .item .el-badge__content{top:4px}","",{version:3,sources:["D:/working/manage-sales/src/pages/message/List.vue"],names:[],mappings:"AACA,yBACE,YAAa,AACb,cAAgB,CACjB,AACD,gBACE,eAAiB,CAClB,AACD,mCACI,OAAS,CACZ",file:"List.vue",sourcesContent:["\n.messages .el-tabs__item {\n  height: 50px;\n  padding: 0 30px;\n}\n.messages .item {\n  margin-top: 10px;\n}\n.messages .item .el-badge__content {\n    top: 4px;\n}\n"],sourceRoot:""}])},"l/+F":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"用户详细信息",visible:e.visible,"element-loading-text":"玩命加载中"},on:{close:function(t){e.$emit("close")},open:function(t){e.$emit("open")}}},[a("el-form",{staticClass:"form-detail",attrs:{model:e.userDetail}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户名"}},[a("span",[e._v(e._s(e.userDetail.username?e.userDetail.username:"无名氏"+e.userDetail.id))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别"}},[a("span",[e._v(e._s(1===e.userDetail.gender?"男":"女"))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话"}},[a("span",[e._v(e._s(e.userDetail.phone))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"银行卡号"}},[a("span",[e._v(e._s(e.userDetail.bank_code))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上次登录时间"}},[a("span",[e._v(e._s(e.userDetail.last_login))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"注册时间"}},[a("span",[e._v(e._s(e.userDetail.created_at))])])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"开户行"}},[a("span",[e._v(e._s(e.userDetail.bank_name))])]),e._v(" "),a("el-form-item",{attrs:{label:"身份证号"}},[a("span",[e._v(e._s(e.userDetail.id_card))])]),e._v(" "),a("el-form-item",{attrs:{label:"推荐总数量"}},[a("el-button",{attrs:{type:"text"},on:{click:e.goUserCustomers}},[e._v(e._s(e.userDetail.recommend_count))])],1)],1)],1)},n=[],r={render:s,staticRenderFns:n};t.a=r},lbnC:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"messages"},[a("div",{staticClass:"pull-right"},[a("transition",{attrs:{name:"el-fade-in"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.mutipleDel,expression:"mutipleDel"}],attrs:{type:"primary",size:"mini",plain:""},on:{click:e.handleMultipeDel}},[e._v("批量删除")])],1),e._v(" "),a("refresh",{attrs:{loading:e.refreshLoading,type:"danger"},on:{refresh:e.refresh}})],1),e._v(" "),a("h2",[e._v("消息中心")]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabs,function(t,s){return a("el-tab-pane",{key:s,attrs:{name:t.name}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("el-badge",{staticClass:"item",attrs:{value:t.total,max:99}},[e._v(e._s(t.title))])],1),e._v(" "),a("list-table",{attrs:{messages:t.message,type:t.name,total:t.total,loading:t.loading},on:{select:e.handleSelect,delSuccess:e.handleDelSuccess,changePage:e.changePage}})],1)}))],1)])},n=[],r={render:s,staticRenderFns:n};t.a=r},o0wV:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.messages,"empty-text":"暂无消息","element-loading-text":"玩命加载中"},on:{select:e.handleSelect,"select-all":e.handleSelect}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return["recommend"===t.row.type?a("span",[a("el-tag",{staticClass:"notify-tag",attrs:{size:"mini"}},[e._v("推荐")]),e._v("用户"),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.showDetail(t.row.notify.sender)}}},[e._v(e._s(t.row.username?t.row.username:"无名氏"+t.row.notify.sender))]),e._v(e._s(t.row.action)+"了"),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.goRecommendDetail(t.row.notify.target)}}},[e._v(e._s(t.row.targets))]),e._v("的"+e._s(t.row.target_type)+"信息")],1):e._e(),e._v(" "),"user"===t.row.type?a("span",[a("el-tag",{staticClass:"notify-tag",attrs:{size:"mini",type:"success"}},[e._v("用户")]),e._v("用户"),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.showDetail(t.row.notify.sender)}}},[e._v(e._s(t.row.username?t.row.username:"无名氏"+t.row.notify.sender))]),e._v(e._s(t.row.action)+"了个人信息")],1):e._e(),e._v(" "),"article"===t.row.type?a("span",[a("el-tag",{staticClass:"notify-tag",attrs:{size:"mini",type:"info"}},[e._v("文章")]),e._v("用户"),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.showDetail(t.row.notify.sender)}}},[e._v(e._s(t.row.username?t.row.username:"无名氏"+t.row.notify.sender))]),e._v(e._s(t.row.action)+"了文章"),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.getPostDetail(t.row.notify.target)}}},[e._v(e._s(t.row.targets))])],1):e._e(),e._v(" "),"progress"===t.row.type?a("span",[a("el-tag",{staticClass:"notify-tag",attrs:{size:"mini",type:"warning"}},[e._v("进展")]),e._v("用户"),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.showDetail(t.row.notify.sender)}}},[e._v(e._s(t.row.username?t.row.username:"无名氏"+t.row.notify.sender))]),e._v(e._s(t.row.action)+"了"),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.goRecommendDetail(t.row.targets.id)}}},[e._v(e._s(t.row.targets.username))]),e._v("的进展信息")],1):e._e(),e._v(" "),"cash"===t.row.type?a("span",[a("el-tag",{staticClass:"notify-tag",attrs:{size:"mini",type:"danger"}},[e._v("红包")]),e._v("用户"),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.showDetail(t.row.notify.sender)}}},[e._v(e._s(t.row.username?t.row.username:"无名氏"+t.row.notify.sender))]),e._v(e._s(t.row.action)+"了"),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.goRecommendDetail(t.row.targets.id)}}},[e._v(e._s(t.row.targets.username))]),e._v("的红包")],1):e._e(),e._v(" "),"private"===t.row.type?a("span",[a("el-tag",{staticClass:"notify-tag",attrs:{size:"mini"}},[e._v("私信")]),e._v("用户"),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.showDetail(t.row.notify.sender)}}},[e._v(e._s(t.row.username?t.row.username:"无名氏"+t.row.notify.sender))]),e._v(e._s(t.row.action)+"的一条信息")],1):e._e(),e._v(" "),"reward"===t.row.type?a("span",[a("el-tag",{staticClass:"notify-tag",attrs:{size:"mini",type:"danger"}},[e._v("奖金")]),e._v("用户"),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.showDetail(t.row.notify.sender)}}},[e._v(e._s(t.row.username?t.row.username:"无名氏"+t.row.notify.sender))]),e._v(e._s(t.row.action)+"了"),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.goRecommendDetail(t.row.targets.id)}}},[e._v(e._s(t.row.targets.username))]),e._v("的奖金")],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.notify.created_at))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.deleteNotify(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"block pull-right"},[a("el-pagination",{attrs:{"page-sizes":[15],layout:"total, prev, pager, next",total:e.total,"page-size":15},on:{"current-change":e.changePage}})],1),e._v(" "),a("user-detail",{attrs:{userDetail:e.userDetail,visible:e.userDialogVisible,loading:e.userDetailLoading},on:{"update:visible":function(t){e.userDialogVisible=t},close:function(t){e.userDialogVisible=!1}}})],1)},n=[],r={render:s,staticRenderFns:n};t.a=r},q83M:function(e,t,a){"use strict";t.a={props:{visible:{type:Boolean,default:!1},userDetail:{type:Object,default:function(){return{}}},loading:{type:Boolean,default:!1}},methods:{goUserCustomers:function(){this.$router.push({name:"CustomerList",query:{user_id:this.userDetail.id},params:{cache:!1}}),this.$emit("update:visible",!1)}}}}});
//# sourceMappingURL=4.333a889f4128e79b5caf.js.map